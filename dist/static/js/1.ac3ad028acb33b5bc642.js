webpackJsonp([1],{"4LTA":function(t,s){},"5CUQ":function(t,s,e){"use strict";(function(t){var a=e("mvHQ"),d=e.n(a),i=e("Fhvg"),o=e("GJzV"),n=e("H6aV"),r=e("b4nk"),c=e("iCUG"),l=e("VXza"),u=e("NY0P");s.a={data:function(){return{bindAddress:"/apiOrder/bindAddress",finishUrl:"/apiOrder/finished",getListUrl:"​/apiAddress/getList",deleteUrl:"​/apiAddress/delete",transUrl:"​/apiCrowdfunding/trans",currentAccount:"",alertInfo:"",toastInfo:"",isWarn:!1,isOrder:!0,orderList:null,eosID:"",addressList:[],defaultAddress:null,edit:null,programs:null,selectedAddress:null,deleteItem:{id:"",index:""}}},mounted:function(){this.getList(),this.getOrder()},methods:{infoByToast:function(t){this.toastInfo=t},getOrder:function(){this.$route.params.order&&(this.orderList=this.$route.params.order,this.programs=this.orderList.programs,this.eosID=this.$route.params.id)},editOrder:function(){this.$router.push({name:"projectPurchase",query:{id:this.eosID},params:{order:this.orderList}})},getList:function(){var s=this;u.a.getAccount().then(function(e){t(".login").hide(),t(".personal").show(),t(".currentAccount").html(e.name),s.$http.post(s.globalData.domain+s.getListUrl,{account:e.name},{emulateJSON:!0}).then(function(t){t.data.success?(s.addressList=t.data.data.pageData,s.addressList.map(function(t){s.$set(t,"isSelected",!1)}),s.addressList.length?s.setDefaultAddress(s.addressList[0]):s.isOrder=!1):s.toastInfo=t.data.message},function(t){console.log(t)})},function(){s.isWarn=!0,s.toastInfo=s.$t("connect_scatter")})},setDefaultAddress:function(s){this.isOrder=!0,this.defaultAddress=JSON.parse(d()(s)),this.selectAddress(s),t("#changeAddress").modal("hide")},selectAddress:function(t){var s=this;this.addressList.map(function(t){s.$set(t,"isSelected",!1)}),t.isSelected=!0,this.selectedAddress=t},editModal:function(t,s){this.edit=JSON.parse(d()(t)),this.edit.index=s,this.selectAddress(t)},deleteModal:function(t,s){this.deleteItem.index=t,this.deleteItem.id=s},deleteAddress:function(t,s){var e=this;u.a.getAccount().then(function(a){e.$http.post(e.globalData.domain+e.deleteUrl,{account:a.name,addressNo:s},{emulateJSON:!0}).then(function(a){a.data.success?(e.addressList.splice(t,1),e.isWarn=!1,e.toastInfo=e.$t("deleted_success"),e.addressList.length?(e.selectedAddress.addressNo==s&&(e.selectedAddress=e.addressList[0]),e.isOrder=!0,e.defaultAddress=JSON.parse(d()(e.selectedAddress)),e.selectAddress(e.selectedAddress)):e.isOrder=!1):(e.isWarn=!0,e.toastInfo=a.data.message)},function(t){console.log(t)})},function(){e.isWarn=!0,e.toastInfo=e.$t("connect_scatter")})},payment:function(){var s=this;this.$http.post(this.globalData.domain+this.bindAddress,{addressNo:this.selectedAddress.addressNo,orderNo:this.orderList.orderNo},{emulateJSON:!0}).then(function(e){e.data.success&&u.a.getAccount().then(function(e){t(".login").hide(),t(".personal").show(),t(".currentAccount").html(e.name),s.currentAccount=e.name,u.a.getEos().transaction({actions:[{account:s.programs.targetTokenContract,name:"transfer",authorization:[{actor:s.currentAccount,permission:e.authority}],data:{from:s.currentAccount,to:s.programs.targetAccount,quantity:parseFloat(s.orderList.amount).toFixed(s.programs.targetTokenDecimal)+" "+s.programs.targetToken,memo:'###{"ID":'+s.programs.eosID+',"creator":"'+s.programs.creator+'","comment":"'+s.orderList.note+'"}###'}}]}).then(function(e){s.$http.post(s.globalData.domain+s.finishUrl,{orderNo:s.orderList.orderNo,hash:e.transaction_id},{emulateJSON:!0}).then(function(e){e.data.success||(s.alertInfo=e.message,t("#alert").modal("show"))});s.orderList.programs.crowdfundingNo,e.transaction_id,s.orderList.amount,s.currentAccount,s.orderList.programs.targetAccount,s.orderList.note;s.$http.post(s.globalData.domain+s.transUrl,{crowdfundingNo:s.orderList.programs.crowdfundingNo,hash:e.transaction_id,amount:s.orderList.amount,from:s.currentAccount,to:s.orderList.programs.targetAccount,comment:s.orderList.note},{emulateJSON:!0}).then(function(e){e.data.success?(s.alertInfo=s.$t("success"),t("#alert").modal("show"),t("#alert").on("hidden.bs.modal",function(t){s.$router.push("/projectBacked")})):(s.alertInfo=e.message,t("#alert").modal("show"))})}).catch(function(e){console.log(e),s.alertInfo=s.$t("pay_error"),t("#alert").modal("show")})},function(){s.isWarn=!0,s.isFail=!1,s.toastInfo=s.$t("connect_scatter")})},function(t){console.log(t)})}},components:{foot:l.a,alertModal:i.a,mdsToast:o.a,addAddress:n.a,editAddress:r.a,deleteAddress:c.a}}}).call(s,e("7t+N"))},BzUU:function(t,s){},H6aV:function(t,s,e){"use strict";var a=e("fjZU"),d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"modal",attrs:{id:"addAddress"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),t.isOrder?e("img",{staticClass:"back",attrs:{src:"static/img/icon/back.png",width:"32","data-dismiss":"modal","data-target":"#changeAddress","data-toggle":"modal"}}):t._e(),t._v(" "),e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("add_address")))]),t._v(" "),e("label",[t._v(t._s(t.$t("contact_name")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.add.name,expression:"add.name"}],staticClass:"basic-input",attrs:{type:"text",placeholder:t.$t("contact_name_pl")},domProps:{value:t.add.name},on:{input:function(s){s.target.composing||t.$set(t.add,"name",s.target.value)}}}),t._v(" "),e("label",[t._v(t._s(t.$t("contact")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.add.mobile,expression:"add.mobile"}],staticClass:"basic-input",attrs:{type:"tel",placeholder:t.$t("contact_pl")},domProps:{value:t.add.mobile},on:{input:function(s){s.target.composing||t.$set(t.add,"mobile",s.target.value)}}}),t._v(" "),e("label",[t._v(t._s(t.$t("shipping_address")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.add.address,expression:"add.address"}],staticClass:"basic-input",attrs:{type:"text",placeholder:t.$t("shipping_address_pl")},domProps:{value:t.add.address},on:{input:function(s){s.target.composing||t.$set(t.add,"address",s.target.value)}}}),t._v(" "),t.isOrder?e("div",{staticClass:"confirm",on:{click:t.addAddress}},[t._v(t._s(t.$t("save_use")))]):e("div",{staticClass:"confirm",on:{click:t.addAddress}},[t._v(t._s(t.$t("save")))])])])]),t._v(" "),e("mds-toast",{attrs:{toastInfo:t.toastInfo,isWarn:t.isWarn},on:{toast:t.infoByToast}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var i=function(t){e("4LTA")},o=e("VU/8")(a.a,d,!1,i,"data-v-707b354a",null);s.a=o.exports},Wplw:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("5CUQ"),d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order"},[e("section",{staticClass:"detail"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"edit",on:{click:t.editOrder}},[t._v(t._s(t.$t("editor")))]),t._v(" "),e("h4",{staticClass:"select-title"},[t._v(t._s(t.$t("order_detail")))]),t._v(" "),t.orderList?e("ul",{staticClass:"order-info"},[e("li",[e("h5",[t._v(t._s(t.$t("project_name"))+":")]),t._v(" "),e("p",[t._v(t._s(t.orderList.programs.title))])]),t._v(" "),e("li",[e("h5",[t._v(t._s(t.$t("order"))+":")]),t._v(" "),e("p",[e("span",[t._v(t._s(t.$t("gear"+t.orderList.level))+" : "+t._s(t.orderList.unitNum)+" "+t._s(t.$t("unit_"+t.orderList.unit)))])])]),t._v(" "),e("li",[e("h5",[t._v(t._s(t.$t("quantity"))+":")]),t._v(" "),e("p",[t._v(t._s(t.orderList.num))])]),t._v(" "),e("li",[e("h5",[t._v(t._s(t.$t("total_amount"))+":")]),t._v(" "),e("p",[t._v(t._s(t.orderList.amount)+" "+t._s(t.programs.targetToken))])])]):t._e(),t._v(" "),e("div",{staticClass:"order-info"},[0==t.addressList.length?e("div",{staticClass:"no-address",attrs:{"data-target":"#addAddress","data-toggle":"modal"}},[t._v("+ "+t._s(t.$t("add_shipping_address")))]):[t.defaultAddress?e("div",[e("h4",[t._v(t._s(t.defaultAddress.name)+" "+t._s(t.defaultAddress.mobile))]),t._v(" "),e("p",[t._v(t._s(t.defaultAddress.address)+" ;")]),t._v(" "),e("a",{staticClass:"change-address",attrs:{href:"#changeAddress","data-toggle":"modal"}},[t._v(t._s(t.$t("change_shipping_address")))])]):e("div",{staticClass:"no-address",attrs:{"data-target":"#changeAddress","data-toggle":"modal"}},[t._v("+ "+t._s(t.$t("add_shipping_address")))])]],2),t._v(" "),e("div",{staticClass:"confirm",on:{click:t.payment}},[t._v(t._s(t.$t("payment")))])])])])]),t._v(" "),e("foot"),t._v(" "),e("div",{staticClass:"modal",attrs:{id:"changeAddress"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("address_pl")))]),t._v(" "),e("div",{staticClass:"add",attrs:{"data-target":"#addAddress","data-toggle":"modal","data-dismiss":"modal"}},[t._v("+"+t._s(t.$t("add_address")))]),t._v(" "),t.addressList.length>0?e("ul",{staticClass:"select-list"},t._l(t.addressList,function(s,a){return e("li",{key:a,class:{selected:s.isSelected}},[e("div",{staticClass:"list-top",on:{click:function(e){t.selectAddress(s)}}},[e("h4",[t._v(t._s(s.name)+" "+t._s(s.mobile))]),t._v(" "),e("p",[t._v(t._s(s.address)+" ;")])]),t._v(" "),e("div",{staticClass:"btn-box"},[e("a",{staticClass:"editor",attrs:{href:"#editAddress","data-dismiss":"modal","data-toggle":"modal"},on:{click:function(e){t.editModal(s,a)}}},[t._v(t._s(t.$t("editor")))]),t._v(" "),e("a",{staticClass:"delete",attrs:{href:"#deleteAddress","data-toggle":"modal"},on:{click:function(e){t.deleteModal(a,s.addressNo)}}},[t._v(t._s(t.$t("delete")))])])])}),0):e("div",{staticClass:"text-center"},[t._v(t._s(t.$t("no_address"))+"，"+t._s(t.$t("add_shipping_address")))]),t._v(" "),e("div",{staticClass:"confirm",on:{click:function(s){t.setDefaultAddress(t.selectedAddress)}}},[t._v(t._s(t.$t("confirm")))])])])]),t._v(" "),e("add-address",{attrs:{addressList:t.addressList,isOrder:t.isOrder},on:{defaultAddress:t.setDefaultAddress}}),t._v(" "),e("edit-address",{attrs:{addressList:t.addressList,edit:t.edit,isOrder:t.isOrder},on:{defaultAddress:t.setDefaultAddress}}),t._v(" "),e("delete-address",{attrs:{id:t.deleteItem.id,index:t.deleteItem.index},on:{deleteAddress:t.deleteAddress}}),t._v(" "),e("alert-modal",{attrs:{info:t.alertInfo}}),t._v(" "),e("mds-toast",{attrs:{toastInfo:t.toastInfo,isWarn:t.isWarn},on:{toast:t.infoByToast}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var i=function(t){e("fzXa")},o=e("VU/8")(a.a,d,!1,i,"data-v-3c4f89e2",null);s.default=o.exports},b4nk:function(t,s,e){"use strict";var a=e("ttfx"),d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"modal",attrs:{id:"editAddress"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t.edit?e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),t.isOrder?e("img",{staticClass:"back",attrs:{src:"static/img/icon/back.png",width:"32","data-dismiss":"modal","data-target":"#changeAddress","data-toggle":"modal"}}):t._e(),t._v(" "),e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("edit_address")))]),t._v(" "),e("label",[t._v(t._s(t.$t("contact_name")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.name,expression:"edit.name"}],staticClass:"basic-input",attrs:{type:"text",placeholder:t.$t("contact_name_pl")},domProps:{value:t.edit.name},on:{input:function(s){s.target.composing||t.$set(t.edit,"name",s.target.value)}}}),t._v(" "),e("label",[t._v(t._s(t.$t("contact")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.mobile,expression:"edit.mobile"}],staticClass:"basic-input",attrs:{type:"tel",placeholder:t.$t("contact_pl")},domProps:{value:t.edit.mobile},on:{input:function(s){s.target.composing||t.$set(t.edit,"mobile",s.target.value)}}}),t._v(" "),e("label",[t._v(t._s(t.$t("shipping_address")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.address,expression:"edit.address"}],staticClass:"basic-input",attrs:{type:"text",placeholder:t.$t("shipping_address_pl")},domProps:{value:t.edit.address},on:{input:function(s){s.target.composing||t.$set(t.edit,"address",s.target.value)}}}),t._v(" "),t.isOrder?e("div",{staticClass:"confirm",on:{click:function(s){t.editAddress(t.edit.index)}}},[t._v(t._s(t.$t("save_use")))]):e("div",{staticClass:"confirm",on:{click:function(s){t.editAddress(t.edit.index)}}},[t._v(t._s(t.$t("save")))])]):t._e()])]),t._v(" "),e("mds-toast",{attrs:{toastInfo:t.toastInfo,isWarn:t.isWarn},on:{toast:t.infoByToast}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var i=function(t){e("t2yo")},o=e("VU/8")(a.a,d,!1,i,"data-v-235e06bd",null);s.a=o.exports},fjZU:function(t,s,e){"use strict";(function(t){var a=e("GJzV"),d=e("NY0P");s.a={props:["addressList","isOrder"],data:function(){return{addUrl:"​/apiAddress/add",toastInfo:"",isWarn:!0,add:{}}},directives:{focus:{inserted:function(t){t.focus()}}},mounted:function(){},methods:{infoByToast:function(t){this.toastInfo=t},addAddress:function(){var s=this;return this.isWarn=!0,this.add.name?this.add.mobile?/^1[3-8]\d{9}$/.test(this.add.mobile)?this.add.address?void d.a.getAccount().then(function(e){var a=s.add;a.account=e.name,s.$http.post(s.globalData.domain+s.addUrl,a,{emulateJSON:!0}).then(function(e){e.data.success?(s.add.addressNo=e.data.data.addressNo,s.addressList.unshift(s.add),s.$emit("defaultAddress",s.add),t("#addAddress").modal("hide"),s.add={},s.isWarn=!1,s.toastInfo=s.$t("success")):(s.isWarn=!0,s.toastInfo=e.data.message)},function(t){console.log(t)})},function(){s.isWarn=!0,s.toastInfo=s.$t("connect_scatter")}):(this.toastInfo=this.$t("address_detail_error"),!1):(this.toastInfo=this.$t("contact_error"),!1):(this.toastInfo=this.$t("contact_pl"),!1):(this.toastInfo=this.$t("contact_name_pl"),!1)}},components:{mdsToast:a.a}}}).call(s,e("7t+N"))},fzXa:function(t,s){},i3cv:function(t,s,e){"use strict";(function(t){s.a={props:["index","id"],mounted:function(){t("#deleteAddress").on("shown.bs.modal",function(){t(".modal-backdrop:eq(1)").css("z-index","1052")})},methods:{deleteAddress:function(){this.$emit("deleteAddress",this.index,this.id)}}}}).call(s,e("7t+N"))},iCUG:function(t,s,e){"use strict";var a=e("i3cv"),d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal confirm-modal",attrs:{id:"deleteAddress"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("p",{staticClass:"modal-info"},[t._v(t._s(t.$t("delete_address_info")))]),t._v(" "),e("div",{staticClass:"btn-contain clearfix"},[e("span",{attrs:{"data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),e("span",{attrs:{"data-dismiss":"modal"},on:{click:t.deleteAddress}},[t._v(t._s(t.$t("determine")))])])])])])},staticRenderFns:[]};var i=function(t){e("BzUU")},o=e("VU/8")(a.a,d,!1,i,"data-v-02965b7c",null);s.a=o.exports},t2yo:function(t,s){},ttfx:function(t,s,e){"use strict";(function(t){var a=e("GJzV"),d=e("NY0P");s.a={props:["addressList","edit","isOrder"],data:function(){return{editUrl:"/apiAddress/modify",toastInfo:"",isWarn:!0}},directives:{focus:{inserted:function(t){t.focus()}}},mounted:function(){},methods:{infoByToast:function(t){this.toastInfo=t},editAddress:function(s){var e=this;return this.isWarn=!0,this.edit.name?this.edit.mobile?/^1[3-8]\d{9}$/.test(this.edit.mobile)?this.edit.address?void d.a.getAccount().then(function(a){var d=e.edit;d.account=a.name,e.$http.post(e.globalData.domain+e.editUrl,d,{emulateJSON:!0}).then(function(a){a.data.success?(e.addressList[s]=e.edit,e.$emit("defaultAddress",e.edit),e.$emit("addressList",e.addressList),t("#editAddress").modal("hide"),e.isWarn=!1,e.toastInfo=e.$t("modify_success"),e.isPositionFocus=!1):(e.isWarn=!0,e.toastInfo=a.data.message)},function(t){console.log(t)})},function(){e.isWarn=!0,e.toastInfo=e.$t("connect_scatter")}):(this.toastInfo=this.$t("address_detail_error"),!1):(this.toastInfo=this.$t("contact_error"),!1):(this.toastInfo=this.$t("contact_pl"),!1):(this.toastInfo=this.$t("contact_name_pl"),!1)}},components:{mdsToast:a.a}}}).call(s,e("7t+N"))}});
//# sourceMappingURL=1.ac3ad028acb33b5bc642.js.map
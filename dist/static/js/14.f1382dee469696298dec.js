webpackJsonp([14],{A84E:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Odnf"),o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"cross-chain"},[a("div",{staticClass:"container"},[a("div",{staticClass:"title uppercase"},[t._v(t._s(t.$t("cross_chain_title")))]),t._v(" "),a("div",{staticClass:"slogan"},[a("a",{attrs:{target:"_blank",href:t.$t("what_is_emds")}},[t._v(t._s(t.$t("cross_chain_slogan")))])]),t._v(" "),a("form",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("label",[t._v(t._s(t.$t("cross_chain_from")))]),t._v(" "),a("div",{staticClass:"basic-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.from.assets,expression:"from.assets"}],staticClass:"basic-input",attrs:{type:"number",placeholder:t.$t("cross_chain_assets"),min:"0"},domProps:{value:t.from.assets},on:{input:[function(s){s.target.composing||t.$set(t.from,"assets",s.target.value)},t.changeAmount]}}),t._v(" "),a("span",{staticClass:"target-token"},[t._v(t._s(t.from.name))])]),t._v(" "),a("div",{staticClass:"low-amount"},[a("span",[t._v(t._s(t.$t("cross_chain_range")))]),t._v(" "+t._s(t.from.min)+" ~ "+t._s(t.from.max)+" "+t._s(t.from.name))])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("label",[t._v(t._s(t.$t("cross_chain_to")))]),t._v(" "),a("div",{staticClass:"basic-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.to.assets,expression:"to.assets"}],staticClass:"basic-input",attrs:{readonly:"true",type:"number",placeholder:t.$t("cross_chain_get_assets")},domProps:{value:t.to.assets},on:{input:function(s){s.target.composing||t.$set(t.to,"assets",s.target.value)}}}),t._v(" "),a("span",{staticClass:"target-token"},[t._v(t._s(t.to.name))])]),t._v(" "),a("div",{staticClass:"low-amount"},[a("span",[t._v(t._s(t.$t("cross_fee")))]),t._v("："+t._s(t.from.fee)+" "+t._s(t.to.name))])])]),t._v(" "),a("label",[t._v(t._s(t.address_title))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.toAddress,expression:"toAddress"}],staticClass:"basic-input",attrs:{type:"text",placeholder:t.$t("cross_chain_account")},domProps:{value:t.toAddress},on:{input:function(s){s.target.composing||(t.toAddress=s.target.value)}}}),t._v(" "),a("a",{staticClass:"confirm",on:{click:t.nextStep}},[t._v(t._s(t.$t("next_step")))])])])]),t._v(" "),a("foot"),t._v(" "),a("mds-toast",{attrs:{toastInfo:t.toastInfo,isWarn:t.isWarn},on:{toast:t.infoByToast}}),t._v(" "),a("mds-alert",{attrs:{info:t.alertInfo}}),t._v(" "),t.isLoaded?t._e():a("loading"),t._v(" "),a("div",{staticClass:"modal",attrs:{id:"successModal"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content text-center"},[t._m(0),t._v(" "),a("img",{attrs:{src:"static/img/crossChain/success.png",width:"64"}}),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("cross_success_title")))]),t._v(" "),a("p",{staticClass:"info"},[t._v(t._s(t.$t("cross_success_info")))]),t._v(" "),a("div",[a("span",{staticClass:"modal-close",attrs:{"data-dismiss":"modal"}},[t._v(t._s(t.$t("got_it")))])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var i=function(t){a("Z2YJ")},n=a("VU/8")(e.a,o,!1,i,"data-v-f00fcb4a",null);s.default=n.exports},Odnf:function(t,s,a){"use strict";(function(t){var e=a("mvHQ"),o=a.n(e),i=a("SC/i"),n=a("VXza"),r=a("GJzV"),d=a("Fhvg"),c=a("NY0P");s.a={props:["blockchain"],data:function(){return{address_title:this.$t("cross_chain_address_eos"),from:{name:"MDS",min_amount:100,max_amount:100,fee:0,address:"",assets:"",decimal:1e18},to:{name:"EMDS",min_amount:100,max_amount:100,fee:0,address:"",assets:"",decimal:1e4},account:"",toAddress:"",low_amount:0,toastInfo:"",alertInfo:"",isWarn:!0,isLoaded:!0,initUrl:"/apiEmds/getInit",createOrderUrl:"/apiEmds/createOrder",finishOrderUrl:"/apiEmds/finishOrder"}},created:function(){this.getInit()},methods:{infoByToast:function(t){this.toastInfo=t},changeAmount:function(){this.to.assets=this.from.assets-this.from.fee>0?this.from.assets-this.from.fee:0},switchFunc:function(){if("eos"==this.blockchain){var t=this.from;this.from=this.to,this.to=t,this.address_title=this.$t("cross_chain_address_eth")}this.low_amount=this.from.min},nextStep:function(){var t=this;if(this.from.assets-0<this.from.min||this.from.assets-0>this.from.max)return this.toastInfo="Amount should between "+this.from.min+" - "+this.from.max,!1;if(""==this.toAddress)return this.toastInfo="Address can't empty!",!1;if("MDS"==this.to.name){if(!/^0x[a-f0-9]{40}$/i.test(this.toAddress))return this.toastInfo="Address Style Error!",!1}else if(this.toAddress.length>12)return this.toastInfo="Address Style Error!",!1;if("MDS"==this.from.name){if(void 0===window.web3&&(this.toastInfo="Get web3 fail. Please install MetaMask."),void 0===web3.eth.accounts[0])return this.toastInfo="Get Account fail.",!1;this.$http.post(this.globalData.domain+this.createOrderUrl,{address:web3.eth.accounts[0],toAddress:this.toAddress,amount:this.from.assets*this.from.decimal,type:"MDS"==this.from.name?0:1},{emulateJSON:!0}).then(function(s){s.data.success?t.sendMDS(s.data.data.orderNo):t.toastInfo=s.data.message})}else c.a.getAccount().then(function(s){t.account=s.name,t.$http.post(t.globalData.domain+t.createOrderUrl,{address:t.account,toAddress:t.toAddress,amount:t.from.assets*t.from.decimal,type:"MDS"==t.from.name?0:1},{emulateJSON:!0}).then(function(s){s.data.success?t.sendEMDS(s.data.data.orderNo):t.toastInfo=s.data.message})})},getInit:function(){var t=this;this.$http.post(this.globalData.domain+this.initUrl,{},{emulateJSON:!0}).then(function(s){s.data.success?(t.from.min=s.data.data.mds.min/t.from.decimal,t.low_amount=s.data.data.mds.min/t.from.decimal,t.from.max=s.data.data.mds.max/t.from.decimal,t.from.fee=s.data.data.mds.fee/t.from.decimal,t.from.address=s.data.data.mds.toAddress,t.to.min=s.data.data.emds.min/t.to.decimal,t.to.max=s.data.data.emds.max/t.to.decimal,t.to.fee=s.data.data.emds.fee/t.to.decimal,t.to.address=s.data.data.emds.toAddress,t.switchFunc()):t.toastInfo="System Init Error!"})},sendMDS:function(s){this.isLoaded=!1;for(var a=parseFloat(this.from.assets)*parseInt(this.from.decimal),e=(a=a.toString(16)).length,o=0;o<64-e;o++)a="0"+a;var i=this;web3.eth.sendTransaction({from:web3.eth.accounts[0],to:"0x66186008c1050627f979d464eabb258860563dbe",value:"0x0",data:"0xa9059cbb000000000000000000000000"+this.from.address.substr(2,this.from.address.length).toLowerCase()+a},function(a,e){e?i.$http.post(i.globalData.domain+i.finishOrderUrl,{address:web3.eth.accounts[0],orderNo:s,hash:e},{emulateJSON:!0}).then(function(s){i.isLoaded=!0,s.data.success?(t("#successModal").modal("show"),i.from.assets="",i.to.assets="",i.toAddress=""):i.toastInfo="System Error!"}):(i.isLoaded=!0,i.toastInfo=a.message)})},sendEMDS:function(s){var a=this;this.isLoaded=!1,c.a.getAccount().then(function(e){t(".login").hide(),t(".personal").show(),t(".currentAccount").html(e.name),c.a.getEos().transaction({actions:[{account:"medisharesbp",name:"transfer",authorization:[{actor:e.name,permission:e.authority}],data:{from:e.name,to:a.from.address,quantity:parseFloat(a.from.assets).toFixed(4)+" EMDS",memo:"EMDS Exchange"}}]}).then(function(o){a.$http.post(a.globalData.domain+a.finishOrderUrl,{address:e.name,orderNo:s,hash:o.transaction_id},{emulateJSON:!0}).then(function(s){a.isLoaded=!0,s.data.success?(t("#successModal").modal("show"),a.from.assets="",a.to.assets="",a.toAddress=""):a.toastInfo="System Error!"})},function(t){a.isLoaded=!0,a.toastInfo=JSON.parse(t).error.details[0].message}).catch(function(t){a.isLoaded=!0,a.toastInfo=o()(t.message)})},function(){a.isLoaded=!0,a.toastInfo=a.$t("connect_scatter")})}},components:{foot:n.a,mdsToast:r.a,mdsAlert:d.a,loading:i.a}}}).call(s,a("7t+N"))},Z2YJ:function(t,s){}});
//# sourceMappingURL=14.f1382dee469696298dec.js.map